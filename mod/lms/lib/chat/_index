# shellcheck shell=dash

___x_cmd_lms_chat(){
    local X_help_cmd='___x_cmd help -m lms chat'; help:arg:parse
    local op="$1";
    case "$op" in
        request|exec)
            shift; ___x_cmd_lms_chat_"$op" "$@" ;;
        *)  N=lms M="Not support such [subcmd=$op]" log:ret:64
    esac
}

___x_cmd_lms_chat_request(){
    local X_help_cmd='___x_cmd help -m lms chat request'; help:arg:parse
    ___x_cmd chat --exec --provider lms "$@"
}

___x_cmd_lms_chat_exec(){
    ___X_CMD_OPENAI_CHAT_REQUEST_NOT_RETRY=1 \
    ___X_CMD_OPENAI_CHAT_ACTUAL_PROVIDER='lms'   \
    ___X_CMD_OPENAI_CHAT_ACTUAL_PROVIDER_NAME='LM Studio'  \
    ___X_CMD_OPENAI_CHAT_ACTUAL_ENDPOINT="$___X_CMD_LMS_DEFAULT_ENDPOINT"    \
    ___x_cmd openai chat exec "$@"
}
