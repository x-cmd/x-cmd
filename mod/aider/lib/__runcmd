
___x_cmd_aider___runmain(){
    local openai_api_key="$OPENAI_API_KEY"
    local gemini_api_key="$GEMINI_API_KEY"
    local xai_api_key="$XAI_API_KEY"
    local deepseek_api_key="$DEEPSEEK_API_KEY"

    [ -n "$openai_api_key" ]    || openai_api_key="$(___x_cmd openai --cur get apikey 2>/dev/null)"
    [ -n "$gemini_api_key" ]    || gemini_api_key="$(___x_cmd gemini --cur get apikey 2>/dev/null)"
    [ -n "$xai_api_key" ]       || xai_api_key="$(___x_cmd grok --cur get apikey 2>/dev/null)"
    [ -n "$deepseek_api_key" ]  || deepseek_api_key="$(___x_cmd deepseek --cur get apikey 2>/dev/null)"

    OPENAI_API_KEY="$openai_api_key"        \
    GEMINI_API_KEY="$gemini_api_key"        \
    XAI_API_KEY="$xai_api_key"              \
    DEEPSEEK_API_KEY="$deepseek_api_key"    \
        ___x_cmd_aider___runcmd "$@"
}

___x_cmd_aider___runcmd(){
    if ___x_cmd_hascmd aider; then
        ___x_cmd_aider___runcmd(){
            ___x_cmd_cmds aider "$@"
        }
    else
        ___x_cmd_aider___runcmd(){
            ___x_cmd snap --run aider "$@"
        }
    fi && ___x_cmd_aider___runcmd "$@"
}
