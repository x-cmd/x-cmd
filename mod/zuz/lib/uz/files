

# TODO: ___x_cmd_zuz_uz_and_files src.py=src/a.py src.doc=src/inner/a.doc
___x_cmd_zuz_uz_and_files(){
    case $target_file in
        *.tar)                  ___x_cmd_zuz_run tar xvf "$target_file"             ;;

        *.tgz)                  ___x_cmd_zuz_run tar xzvf "$target_file"            ;;
        *.tar.gz)               ___x_cmd_zuz_run tar xzvf "$target_file"            ;;
        *.tar.gz.*)             ___x_cmd_cmds_cat "${target_file%.*}".* | LC_ALL="$___X_CMD_LOCALE_DEF_C" tar xzv   ;;
        *.gz)                   ___x_cmd_zuz_run ___x_cmd 7z x -y "$target_file"           ;;

        *.tar.Z)                ___x_cmd_zuz_run tar xZvf "$target_file"            ;;
        *.tar.Z.*)              ___x_cmd_cmds_cat "${target_file%.*}".* | LC_ALL="$___X_CMD_LOCALE_DEF_C" tar xZvf  ;;
        *.Z)                    ___x_cmd_zuz_run ___x_cmd 7z x -y  "$target_file"          ;;

        *.tbz|*.tar.bz2)
                                if ___x_cmd_hasbin bzip2; then
                                    ___x_cmd_zuz_run tar xjvf "$target_file"
                                else
                                    ___x_cmd 7z e -so -y "$target_file" | LC_ALL="$___X_CMD_LOCALE_DEF_C" tar xf -
                                fi
                                ;;
        *.bz2)                  ___x_cmd_zuz_run tar xjvf "$target_file"            ;;
        *.bz2.*)                ___x_cmd_cmds_cat "${target_file%.*}".* | LC_ALL="$___X_CMD_LOCALE_DEF_C" tar xjvf  ;;

        *.tar.xz)
            if ___x_cmd_hasbin xz; then
                ___x_cmd_zuz_run tar xvf "$target_file"
            else
                ___x_cmd 7z e -so -y "$target_file" | LC_ALL="$___X_CMD_LOCALE_DEF_C" tar xf -
            fi
        ;;
        *.lha|*.lzh)
            if ___x_cmd_hasbin lha; then
                ___x_cmd_zuz_run lha x -f "$target_file"
            elif ___x_cmd_hasbin jlha; then
                ___x_cmd_zuz_run jlha xf "$target_file"
            else
                zuz:warn "The current x-cmd does not support the LHA package; please install lha in advance."
                return 1
            fi
            ;;
        *.xz)                   ___x_cmd_zuz_run xz -d "$target_file"               ;;


        *.tar.*)                ___x_cmd_cmds_cat "${target_file%.*}".* | LC_ALL="$___X_CMD_LOCALE_DEF_C" tar xvf                 ;;

                                # TODO: Figure it out
        *.zip)                  ___x_cmd_zuz_run ___x_cmd 7z e "$@"                        ;;
                                # ___x_cmd_zuz_run x unzip "$target_file"
                                # unzip xfv "$target_file" "$@"

        *.rar)                  ___x_cmd_zuz_run ___x_cmd unrar "$target_file"             ;;
        *.7z)                   ___x_cmd_zuz_run ___x_cmd 7zd x "$target_file"              ;;
                                # NOTE:: use 7zr command

        *)                      ___x_cmd_zuz --help; zuz:warn "Unsupported to decompress as $target_file format.";
                                return 1
                                ;;
    esac
}
