# shellcheck shell=dash

___x_cmd_codex_zhipu(){
    local op="$1"
    case "$op" in
        -h|--help)      ___x_cmd help -m codex zhipu; return 0 ;;
        --)             shift ;;
    esac

    local model=""
    local apikey=""
    local endpoint=""
    local x_=""

    ___x_cmd zhipu --cur model:= apikey:= endpoint:= 2>/dev/null
    [ -n "$model" ] || {
        x_=; ___x_cmd zhipu --cfg def_ model
        model="$x_"
    }

    [ -n "$endpoint" ] || {
        x_=; ___x_cmd zhipu --cfg def_ endpoint
        endpoint="$x_"
    }

    local url="$endpoint"
    local apikey="${ZHIPU_API_KEY:-"$apikey"}"
    local provider="zhipu"
    local provider_name="Zhipu AI"
    local wire_api="chat"
    ___x_cmd_codex_other___use "$provider" "$url" "$apikey" "$model" "$provider_name" "$wire_api" "$@"
}
