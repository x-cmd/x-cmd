
# x service log which ssh
# x service log tail ssh
# x service log which ssh

___x_cmd_service_log(){
    [ "$#" -gt 0 ] ||   set -- tail

    while [ $# -gt 0 ]; do
        case "$1" in
            -h|--help)      ___x_cmd help -m service log "$@" ; return 0 ;;
            which)          ___x_cmd_service_log_which "$@" ;;
            cd)             ___x_cmd_service_log_cd "$@" ;;
            tail)           ___x_cmd_service_log_tail "$@" ;;
            *)              break ;;
        esac
    done

    local name="$1"

    local servicepath="$___X_CMD_SERVICE_FP_DATA/$name"
    local logpath="$pidpath/log"

    local

    case "$mode" in
        cd)         ___x_cmd_cmds_cd "$logpath" ;;
        which)      ___x_cmd rat ;;
    esac
}


___x_cmd_service_log_which(){
    [ "$#" -gt 0 ] ||   set -- --help

    while [ $# -gt 0 ]; do
        case "$1" in
            -h|--help)      ___x_cmd help -m service log "$@" ; return 0 ;;
            *)              break ;;
        esac
    done

    local name="$1"

    local fp_service="$___X_CMD_SERVICE_FP_DATA/$name"

    local fp_loglatest="$fp_service/log/LATEST"
    local logname; read -r logname <"$fp_loglatest"
}

___x_cmd_service_log_cd(){
    [ "$#" -gt 0 ] ||   set -- --help

    while [ $# -gt 0 ]; do
        case "$1" in
            -h|--help)      ___x_cmd help -m service log "$@" ; return 0 ;;
            *)              break ;;
        esac
    done

    local name="$1"

    local fp_service="$___X_CMD_SERVICE_FP_DATA/$name"

    local fp_loglatest="$fp_service/log/LATEST"
    local logname; read -r logname <"$fp_loglatest"

}

___x_cmd_service_log_tail(){
    [ "$#" -gt 0 ] ||   set -- --help

    while [ $# -gt 0 ]; do
        case "$1" in
            -h|--help)      ___x_cmd help -m service log "$@" ; return 0 ;;
            *)              break ;;
        esac
    done

    local name="$1"

    local fp_service="$___X_CMD_SERVICE_FP_DATA/$name"

    local fp_loglatest="$fp_service/log/LATEST"
    local logname; read -r logname <"$fp_loglatest"

    local fp_log="$fp_service/log/$logname"

    ___x_cmd_cmds tail -f "$fp_log"
}
