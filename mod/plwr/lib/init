# shellcheck    shell=dash

___X_CMD_PLWR_INIT_FP="$___X_CMD_ROOT_DATA/plwr/init"

___x_cmd_plwr_init(){
    [ ! -f "$___X_CMD_PLWR_INIT_FP" ] || {
        ___x_cmd fileage --in 10d "$___X_CMD_PLWR_INIT_FP"
        return 0
    }

    ___x_cmd_plwr_reinit
}

___x_cmd_plwr_reinit(){
    # china proxy can using:
    # PLAYWRIGHT_DOWNLOAD_HOST="https://cdn.npmmirror.com/binaries/playwright" deno run -A npm:playwright install

    ___x_cmd  deno run --allow-all npm:playwright install   chromium ffmpeg || return $?

    # Using chromium ...
    # user login chromium

    ___x_cmd ensurefp "$___X_CMD_PLWR_INIT_FP"
    printf "\n" >"$___X_CMD_PLWR_INIT_FP"

    plwr:info "Now, You can use 'x plwr handon' to login more websites for more customized settings."
}
