# shellcheck shell=dash

___x_cmd_claude_siliconflow(){
    local op="$1"
    case "$op" in
        -h|--help)      ___x_cmd help -m claude siliconflow; return 0 ;;
        --)             shift ;;
    esac

    local token="$ANTHROPIC_AUTH_TOKEN"
    if [ -z "$token" ]; then
        token="${SILICONFLOW_API_KEY:-"$(___x_cmd siliconflow --cur get apikey 2>/dev/null)"}"
        [ -n "$token" ] || \
            claude:info \
                --tip1 'x siliconflow --cfg'                       \
                --tip2 'x siliconflow --cfg apikey=<YOUR-API-KEY>' \
                "Please setup siliconflow API-KEY."
    fi

    local url="${ANTHROPIC_BASE_URL:-"https://api.siliconflow.cn/"}"
    local model="${ANTHROPIC_MODEL:-"moonshotai/Kimi-K2-Instruct-0905"}"
    local fast_model="${ANTHROPIC_SMALL_FAST_MODEL:-"moonshotai/Kimi-K2-Instruct-0905"}"
    local nonessential_traffic="${CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC}"

    ___x_cmd_claude_other___use "siliconflow" "$url" "$token" "$model" "$fast_model" "$nonessential_traffic" "$@"
}
