
# shellcheck shell=dash

xrc:mod:lib     claude      other/ds    other/kimi    other/zhipu    other/sili    other/doubao    other/openrouter

___x_cmd_claude_other___use(){
    local provider="$1"
    local url="$2"
    local token="$3"
    local model="$4"
    local fast_model="$5"
    local nonessential_traffic="$6"
    shift 6

    local timeout="${API_TIMEOUT_MS:-"60000"}"

    claude:debug --url "$url" --token "$token" --timeout "$timeout" --model "$model" --fast_model "$fast_model" --nonessential_traffic "$nonessential_traffic" "Use provider[$provider] to run claude-code"

    ANTHROPIC_BASE_URL="${url}"                                        \
    ANTHROPIC_AUTH_TOKEN="${token}"                                    \
    API_TIMEOUT_MS="${timeout}"                                        \
    ANTHROPIC_MODEL="${model}"                                         \
    CLAUDE_CODE_SUBAGENT_MODEL="${fast_model}"                         \
    ANTHROPIC_DEFAULT_OPUS_MODEL="${model}"                            \
    ANTHROPIC_DEFAULT_SONNET_MODEL="${model}"                          \
    ANTHROPIC_DEFAULT_HAIKU_MODEL="${fast_model}"                      \
    CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC="${nonessential_traffic}" \
        ___x_cmd_claude___runcmd "$@"
}


