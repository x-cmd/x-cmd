# shellcheck shell=dash

___x_cmd_claude_ds(){
    local op="$1"
    case "$op" in
        -h|--help)      ___x_cmd help -m claude ds; return 0 ;;
        --)             shift ;;
    esac

    claude:provider:fetch:init

    ___x_cmd_claude_ds___fetch_ || return $?

    ANTHROPIC_API_KEY="" API_TIMEOUT_MS="$x_timeout"    \
        ___x_cmd_claude_other___use     ds              \
        "$x_url" "$x_apikey" "$x_model" "$x_fastmodel" "$x_nonessential_traffic" "$@"
}

___x_cmd_claude_ds___fetch_(){
    local model=""
    local apikey=""

    ___x_cmd deepseek --cur model:= apikey:= 2>/dev/null

    [ -n "$apikey" ]    || {
        claude:warn \
            --tip1 'x deepseek --cfg'                       \
            --tip2 'x deepseek --cfg apikey=<YOUR-API-KEY>' \
            "Please setup DeepSeek API-KEY."
        return 1
    }

    x_url="https://api.deepseek.com/anthropic"
    x_apikey="$apikey"

    x_model="${model}"
    [ -n "$x_model" ]  ||  x_model=deepseek-chat

    x_fastmodel="${x_model}"
}
