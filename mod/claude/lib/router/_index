
xrc:mod:lib claude     router/__runcmd  router/setup

___x_cmd_claude_router(){
    [ "$#" -gt 0 ] ||   set -- --help

    local op="$1";      shift
    case "$op" in
        -h|--help)      ___x_cmd help -m claude router "$@";    return 0 ;;
        code)           ___x_cmd_claude_router_code            "$@" ;;
        setup|--setup)  ___x_cmd_claude_router_setup           "$@" ;;

        --|--runmain)   ___x_cmd_claude_router___runmain       "$@" ;;
        --runcmd)       ___x_cmd_claude_router___runcmd        "$@" ;;
        *)              ___x_cmd_claude_router___runmain "$op" "$@" ;;
    esac
}

___x_cmd_claude_router_code(){
    if ___x_cmd_hascmd claude; then
        ___x_cmd_claude_router_code(){
            ___x_cmd_claude_router___runcmd code "$@"
        }
    else
        local x_=""
        ___x_cmd pkg sphere getbinpath_     \
            claude-code v2.0.42 shim_bin    || return $?
        ___X_CMD_CLAUDE_CODE_SHIMAPP_PATH="$x_"
        ___x_cmd_claude_router_code(){
            PATH="${___X_CMD_CLAUDE_CODE_SHIMAPP_PATH}:$PATH" ___x_cmd_claude_router___runcmd code "$@"
        }
    fi  && ___x_cmd_claude_router_code "$@"
}

