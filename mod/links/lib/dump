# shellcheck shell=dash

___x_cmd_links_dump(){
    # Enable in the future ...
    local codeurl=""
    local llmstxt=""
    local source=""

    local readable=""
    local trafi=""

    while [ $# -gt 0 ]; do
        case "$1" in
            -c|--codeurl)       codeurl=1   ;;
            -l|--llmstxt)       llmstxt=1   ;;
            -s|--source)        source=1    ;;

            -r|--readable)      readable=1  ;;
            -t|--trafi)         trafi=1  ;;

            -m|--markitdown)    markitdown=1  ;;

            *)                  break ;;
        esac
        shift
    done

    local url="$1"

    if [ -n "$codeurl" ]; then
        local x_=""; ___x_cmd_links_codeurl_ "$url"

        local data
        if data="$(___x_cmd curl -s -L --fail "$x_")"; then
            printf "%s\n" "$data"
            return 0
        fi
    fi

    if [ -n "$llmstxt" ]; then
        local llmstxt_url="$url/llms.txt"
        local llms_data
        if llms_data="$(___x_cmd ccmd 10m -- curl -s -L --fail "$llmstxt_url")"; then
            printf "%s\n" "$llms_data"
            return 0
        fi
    fi

    if [ -z "$source" ]; then
        set -- -dump "$url"
    else
        set -- -source "$url"
    fi

    ___x_cmd ccmd 10m --  ___x_cmd_links___exec  "$@"
}
