# shellcheck shell=dash
# x font i fira-code
# ...

# shellcheck disable=SC2034
___x_cmd_font_install(){
    local fontargs=""
    while [ $# -gt 0 ]; do
        case "$1" in
            -h|--help)  ___x_cmd help -m font install "$@";     return 0 ;;
            -*)         arg:add fontargs "$1";  shift ;;
            *)          break ;;
        esac
    done

    [ $# -gt 0 ] || {
        ___x_cmd_is_stdout2tty || {
            N=font M="Please provide a font like fira" log:ret:64
        }

        local id=

        ___x_cmd ui select id "Choose a font to install"        \
            "nerd/FiraCode"                                     \
            "Choose other fonts"                                \
            "Go to nerdfont website to preview the nerdfont"    \
            "exit"

        case "$id" in
            1)      ___x_cmd font nerd install nerd/FiraCode ;;
            2)      ___x_cmd font nerd ls ;;
            3)      ___x_cmd font nerd preview ;;
            *)      return 0
        esac

        return 0
    }

    local fontname=""
    local typename=""
    case "$1" in
        noto)       typename=noto; fontname="$1"      ;;
        nerd/*)     typename=nerd; fontname="${1#*/}" ;;
        *)          typename=nerd; fontname="$1"      ;;
    esac

    eval ___x_cmd_font "$typename" install "$fontargs" '"$fontname"'
}


___x_cmd_font_install___install_system(){
    local source="${1:?'Please provide source folder name'}";   shift;
    ___x_cmd mkdirp "$___X_CMD_FONT_DIR" || return
    font:info --source "$source" --target "$___X_CMD_FONT_DIR" "Copy resource font files to font folder..."

    ___x_cmd find "$source" -type f   -iname "*.otf" -or -iname "*.ttf" | {
        local line=""
        while read -r line; do
            set -- "$@" "$line"
            # ... filter the font
        done
        ___x_cmd sudo cp -f "$@" "$___X_CMD_FONT_DIR"
    }
}
